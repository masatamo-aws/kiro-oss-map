# Kiro OSS Map v2.1.0 - Map Service 環境変数設定例

# =============================================================================
# 基本設定
# =============================================================================

# 実行環境 (development, staging, production)
NODE_ENV=development

# サーバーポート
PORT=3002

# ログレベル (error, warn, info, debug)
LOG_LEVEL=info

# =============================================================================
# Redis設定
# =============================================================================

# Redisホスト
REDIS_HOST=localhost

# Redisポート
REDIS_PORT=6379

# Redisパスワード（オプション）
REDIS_PASSWORD=

# Redis データベース番号
REDIS_DATABASE=0

# Redisキープレフィックス
REDIS_KEY_PREFIX=map:

# =============================================================================
# ストレージ設定
# =============================================================================

# ストレージタイプ (local, s3, gcs)
STORAGE_TYPE=local

# ローカルストレージ設定
STORAGE_LOCAL_BASE_PATH=./data
STORAGE_LOCAL_TILES_PATH=./data/tiles
STORAGE_LOCAL_STYLES_PATH=./data/styles

# S3ストレージ設定
S3_BUCKET=kiro-map-tiles
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_ENDPOINT=

# Google Cloud Storage設定
GCS_BUCKET=kiro-map-tiles
GCS_KEY_FILENAME=./gcs-key.json
GCS_PROJECT_ID=kiro-map-project

# =============================================================================
# タイル設定
# =============================================================================

# サポートするタイル形式（カンマ区切り）
TILE_FORMATS=png,jpg,webp,pbf

# 最大ズームレベル
TILE_MAX_ZOOM=18

# 最小ズームレベル
TILE_MIN_ZOOM=0

# タイルサイズ（ピクセル）
TILE_SIZE=256

# デフォルトタイル形式
TILE_DEFAULT_FORMAT=png

# JPEG品質 (1-100)
TILE_JPEG_QUALITY=85

# WebP品質 (1-100)
TILE_WEBP_QUALITY=80

# タイルキャッシュTTL（秒）
TILE_CACHE_TTL=86400

# タイルキャッシュ最大サイズ
TILE_CACHE_MAX_SIZE=1GB

# =============================================================================
# CDN設定
# =============================================================================

# CDN有効化
CDN_ENABLED=false

# CDNプロバイダー (cloudflare, aws, gcp)
CDN_PROVIDER=cloudflare

# CDNベースURL
CDN_BASE_URL=https://cdn.kiro-map.com

# CDNパージAPIキー
CDN_PURGE_API_KEY=

# CDNゾーンID（Cloudflare用）
CDN_ZONE_ID=

# =============================================================================
# CORS設定
# =============================================================================

# 許可するオリジン（カンマ区切り）
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://kiro-map.com,https://*.kiro-map.com

# =============================================================================
# 処理設定
# =============================================================================

# 最大同時処理ジョブ数
PROCESSING_MAX_CONCURRENT_JOBS=4

# 処理タイムアウト（ミリ秒）
PROCESSING_TIMEOUT_MS=30000

# =============================================================================
# 監視設定
# =============================================================================

# Prometheus有効化
PROMETHEUS_ENABLED=true

# Prometheusポート
PROMETHEUS_PORT=9090

# Prometheusメトリクスパス
PROMETHEUS_PATH=/metrics

# Jaeger有効化
JAEGER_ENABLED=false

# Jaegerエンドポイント
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# =============================================================================
# セキュリティ設定
# =============================================================================

# APIキー（オプション）
API_KEY=

# JWT秘密鍵（認証が必要な場合）
JWT_SECRET=your-super-secret-jwt-key-here

# =============================================================================
# データベース設定（将来の拡張用）
# =============================================================================

# PostgreSQL接続URL（メタデータ保存用）
DATABASE_URL=postgresql://user:password@localhost:5432/kiro_map

# =============================================================================
# 外部サービス設定
# =============================================================================

# 認証サービスURL
AUTH_SERVICE_URL=http://localhost:3001

# 検索サービスURL
SEARCH_SERVICE_URL=http://localhost:3003

# ルーティングサービスURL
ROUTE_SERVICE_URL=http://localhost:3004

# =============================================================================
# 開発・デバッグ設定
# =============================================================================

# デバッグモード
DEBUG=kiro:map:*

# プロファイリング有効化
PROFILING_ENABLED=false

# メモリ使用量監視
MEMORY_MONITORING=true

# パフォーマンス監視
PERFORMANCE_MONITORING=true